# 什么是跨域？（CORS、同源策略）

> **同源策略：限制从一个源加载的文档或脚本如何与来自另一个源的资源进行交互。这是一个用于隔离潜在恶意文件的关键的安全机制。**（来自MDN官方的解释）
>
> **受浏览器同源策略的限制，非同源的两个URL间不能通信，非同源的脚本不能操作其他源下面的对象**，但在实际开发场景中， 这种情况经常出现， 此时需要通过跨域进行非同源通信

跨域问题的来源是浏览器为了请求安全而引入的基于**同源策略的安全特性**。当页面和请求的协议、主机名或端口不同时，浏览器判定两者不同源，即为跨域请求。需要注意的是跨域是浏览器的限制，服务端并不受此影响。

当产生跨域时，我们可以通过 JSONP、CORS、postMessage 等方式解决。

# 同源策略有什么限制

* 源包括三个部分：**协议、域名、端口（http协议的默认端口是80）**。如果有任何一个部分不同，则源不同，那就是跨域了。
* 限制：这个源的文档没有权利去操作另一个源的文档。这个限制体现在：（要记住）
  * **Cookie、LocalStorage和IndexDB无法获取。**
  * **无法获取和操作DOM。**
  * **不能发送Ajax请求。我们要注意，Ajax只适合同源的通信。**
 
但是有三个标签是允许跨域加载资源：

* <img src=XXX>
* <link href=XXX>
* <script src=XXX>


# 常见通信方式
* **ajax:不支持跨域。**
* **WebSocket:不受同源策略的限制，支持跨域**
* **跨域资源共享(CORS):不受同源策略的限制，支持跨域。一种新的通信协议标准。可以理解成是：同时支持同源和跨域的Ajax。**

# 常见的跨域方式

1. **jsonp**

2. **CORS（Cross-Origin Resource Sharing）**

3. **nginx反向代理**

4. **WebSocket**

5. **postMessage**
